[archdef]
MODELS_DIR = /scratch/cfu/models
SCRATCH_DIR = /scratch
SCRATCH_TMP_DIR = /tmp
HSM_DIR = /share/data/cfu

GRIBAPIPATH = /scratch/cfu/opt/grib_api-1.9.9/intel-13/bin
GRIBAPIPATH_DEF = /scratch/cfu/opt/grib_api-1.9.9/intel-13/share/definitions
GRIBAPIPATH_SAM = /scratch/cfu/opt/grib_api-1.9.9/intel-13/ifs_samples/grib1

ENVCOM=
# modules setup
 set +xuve
 source /opt/Modules/default/init/ksh
 module purge
 module load intel/2013sp1
 module list
 PATH=/scratch/cfu/opt/netcdf-3.6.3/intel-13/bin:${PATH}
 PATH=/scratch/cfu/opt/nco-3.9.9/intel-13/bin:${PATH}
 PATH=/scratch/cfu/opt/cdo-1.4.5.1/intel-13/bin:${PATH}
 PATH=/scratch/cfu/opt/cdftools-2.1/intel-13/bin:${PATH}
 PATH=/scratch/cfu/opt/rebuild-r1312/bin:${PATH}
 PATH=/scratch/cfu/opt/grib_api-1.8.0/intel-13/bin:${PATH}
 set -xuve

ENVPARA=
# modules setup
 set +xuve
 source /opt/Modules/default/init/ksh
 module purge
 module load intel/2013sp1
 module load impi/4.1.1.036
 # tell OpenMPI to only use infiniband
 export OMPI_MCA_btl=sm,self,openib
 module list
 set -xuve

RUNPARAIFS=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 mpirun -np $IFS_nproc ${IFS_exe} -v ecmwf -e $EXPVER
 set -e

RUNPARANEM=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 mpirun -np $NEMO_nproc ${NEMO_exe}
 set -e

RUNPARAECE=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 mpirun -np $OASIS_nproc ${OASIS3_exe} : \
        -np $IFS_nproc ${IFS_exe} -v ecmwf -e $EXPVER : \
        -np $NEMO_nproc ${NEMO_exe}
 set -e

ENVCOM3=
# modules setup
 set +xuve
 source /opt/Modules/default/init/bash
 module purge
 module load intel/2013sp1
 module load impi/4.1.1.036
 module load inetcdf/4.1.3
 module load cdo/1.6.1
 module load nco/4.3.7
 module list
 PATH=/scratch/cfu/opt/cdftools-3.0/intel-13/bin:${PATH}
 PATH=/scratch/cfu/opt/rebuild_nemo-ece3/intel-13/bin:${PATH}
 PATH=/scratch/cfu/opt/grib_api-1.9.9/intel-13/bin:${PATH}
 set -xuve

ENVPARA3=
# modules setup
 set +xuve
 source /opt/Modules/default/init/bash
 module purge
 module load intel/2013sp1
 module load impi/4.1.1.036
 # tell OpenMPI to only use infiniband
 export OMPI_MCA_btl=sm,self,openib
 module load szip/2.1
 module load iphdf5/1.8.11
 module load inetcdf/4.1.3
 module list
 set -xuve

RUNPARAIFS3=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 mpirun -np $ifs_numproc ${ifs_exe_file} -v ecmwf -e $exp_name
 set -e

RUNPARANEM3=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 mpirun -np $nem_numproc ${nem_exe_file}
 set -e

RUNPARAECE3=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 mpirun -np ${oas_numproc} ${oas_exe_file} : \
        -np ${ifs_numproc} ${ifs_exe_file} -v ecmwf -e ${exp_name} : \
        -np ${nem_numproc} ${nem_exe_file}
 set -e

HEADER_LOCALSETUP= #!/bin/bash
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################

HEADER_REMOTESETUP= #!/bin/sh
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################
 #   
 #$ -S /bin/sh
 #$ -N %%JOBNAME%%
 #$ -e %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/
 #$ -o %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/
 #$ -V
 #$ -l h_rt=%%WALLCLOCK%%:00
 #
 ###############################################################################

HEADER_INI= #!/bin/sh
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################
 #   
 #$ -S /bin/sh
 #$ -N %%JOBNAME%%
 #$ -e %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/
 #$ -o %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/
 #$ -V
 #$ -l h_rt=%%WALLCLOCK%%:00
 #
 ###############################################################################

HEADER_SIM= #!/bin/sh
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################
 #   
 #$ -S /bin/sh
 #$ -N %%JOBNAME%%
 #$ -e %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/
 #$ -o %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/
 #$ -V
 #$ -l h_rt=%%WALLCLOCK%%:00
 #$ -pe orte %%NUMPROC%% 
 #
 ###############################################################################

HEADER_POST= #!/bin/sh
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################
 #   
 #$ -S /bin/sh
 #$ -N %%JOBNAME%%
 #$ -e %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/
 #$ -o %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/
 #$ -V
 #$ -l h_rt=%%WALLCLOCK%%:00
 #
 ###############################################################################

HEADER_CLEAN= #!/bin/sh
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################
 #   
 #$ -S /bin/sh
 #$ -N %%JOBNAME%%
 #$ -e %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/
 #$ -o %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/
 #$ -V
 #$ -l h_rt=%%WALLCLOCK%%:00
 #
 ###############################################################################

HEADER_LOCALTRANS = #!/bin/bash
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################

HEADER_WRAPPER = #!/usr/bin/env python
 ###############################################################################
 #                              %%TASKTYPE%%
 ###############################################################################
 #$ -S /usr/bin/python
 #$ -N %%JOBNAME%%
 #$ -V
 #$ -cwd
 #$ -pe orte %%NUMPROC%%
 #
 ###############################################################################

