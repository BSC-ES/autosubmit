[archdef]
MODELS_DIR = /perm/ms/spesiccf/c3m/models
SCRATCH_DIR = /scratch/ms
SCRATCH_TMP_DIR = $SCRATCHDIR
HSM_DIR = ec:/c3m

GRIBAPIPATH = /usr/local/lib/metaps/lib/grib_api/1.9.16/bin64
GRIBAPIPATH_DEF = /usr/local/lib/metaps/lib/grib_api/1.9.16/share/definitions
GRIBAPIPATH_SAM = /usr/local/lib/metaps/lib/grib_api/1.9.16/ifs_samples/grib1

ENVCOM3=
# modules setup
 set +xuve
 PATH=/usr/local/apps/netcdf4/4.1.3/LP64/bin:${PATH}
 PATH=/usr/local/apps/nco/4.0.8/LP64/bin:${PATH}
 PATH=/usr/local/apps/cdo/1.5.8/LP64/bin:${PATH}
 PATH=/perm/ms/spesiccf/c3m/opt/cdftools-3.0/ibm-xlc/bin:${PATH}
 PATH=/perm/ms/spesiccf/c3m/opt/rebuild_nemo-ece3/ibm-xlc/bin:${PATH}
 PATH=/usr/local/lib/metaps/lib/grib_api/1.9.16/bin64:${PATH}
 set -xuve

ENVPARA3=
# modules setup

RUNPARAIFS3=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 rm -f model.conf
 for node in $(seq 1 $ifs_numproc); do
     echo "$ifs_exe_file -v ecmwf -e  $exp_name" >> model.conf
 done
 /usr/bin/poe -pgmmodel mpmd -cmdfile model.conf
 set -e

RUNPARANEM3=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 rm -f model.conf
 for node in $(seq 1 $nem_numproc); do
     echo "$nem_exe_file" >> model.conf
 done
 /usr/bin/poe -pgmmodel mpmd -cmdfile model.conf
 set -e

RUNPARAECE3=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 rm -f model.conf
 for node in $(seq 1 $oas_numproc); do
     echo "$oas_exe_file" >> model.conf
 done
 for node in $(seq 1 $ifs_numproc); do
     echo "$ifs_exe_file -v ecmwf -e  $exp_name" >> model.conf
 done
 for node in $(seq 1 $nem_numproc); do
     echo "$nem_exe_file" >> model.conf
 done
 /usr/bin/poe -pgmmodel mpmd -cmdfile model.conf
 set -e

HEADER_LOCALSETUP= #!/bin/bash
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################

HEADER_REMOTESETUP= #!/bin/ksh
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################
 #
 #@ shell            = /usr/bin/ksh 
 #@ class            = ns
 #@ job_type         = serial
 #@ job_name         = %%JOBNAME%%
 #@ output           = %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/$(job_name).$(jobid).out 
 #@ error            = %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/$(job_name).$(jobid).err 
 #@ notification     = error
 #@ resources        = ConsumableCpus(1) ConsumableMemory(1200mb)
 #@ wall_clock_limit = %%WALLCLOCK%%:00
 #@ queue
 #
 ###############################################################################

HEADER_INI= #!/bin/ksh
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################
 #
 #@ shell            = /usr/bin/ksh 
 #@ class            = ns
 #@ job_type         = serial
 #@ job_name         = %%JOBNAME%%
 #@ output           = %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/$(job_name).$(jobid).out 
 #@ error            = %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/$(job_name).$(jobid).err 
 #@ notification     = error
 #@ resources        = ConsumableCpus(1) ConsumableMemory(1200mb)
 #@ wall_clock_limit = %%WALLCLOCK%%:00
 #@ queue
 #
 ###############################################################################

HEADER_SIM= #!/bin/ksh
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################
 #
 #@ shell            = /usr/bin/ksh 
 #@ class            = np
 #@ job_type         = parallel
 #@ job_name         = %%JOBNAME%%
 #@ output           = %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/$(job_name).$(jobid).out 
 #@ error            = %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/$(job_name).$(jobid).err 
 #@ notification     = error
 #@ resources        = ConsumableCpus(1) ConsumableMemory(1200mb)
 #@ ec_smt           = no
 #@ total_tasks      = %%NUMPROC%% 
 #@ wall_clock_limit = %%WALLCLOCK%%:00
 #@ queue
 #
 ###############################################################################

HEADER_POST= #!/bin/ksh
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################
 #
 #@ shell            = /usr/bin/ksh 
 #@ class            = np
 #@ job_type         = parallel
 #@ job_name         = %%JOBNAME%%
 #@ output           = %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/$(job_name).$(jobid).out 
 #@ error            = %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/$(job_name).$(jobid).err 
 #@ notification     = error
 #@ resources        = ConsumableCpus(1) ConsumableMemory(1200mb)
 #@ ec_smt           = no
 #@ total_tasks      = %%NUMPROC%% 
 #@ wall_clock_limit = %%WALLCLOCK%%:00
 #@ queue
 #
 ###############################################################################

HEADER_CLEAN= #!/bin/ksh
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################
 #
 #@ shell            = /usr/bin/ksh 
 #@ class            = ns
 #@ job_type         = serial
 #@ job_name         = %%JOBNAME%%
 #@ output           = %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/$(job_name).$(jobid).out 
 #@ error            = %%SCRATCH_DIR%%/%%HPCPROJ%%/%%HPCUSER%%/%%EXPID%%/LOG_%%EXPID%%/$(job_name).$(jobid).err 
 #@ notification     = error
 #@ resources        = ConsumableCpus(1) ConsumableMemory(1200mb)
 #@ wall_clock_limit = %%WALLCLOCK%%:00
 #@ queue
 #
 ###############################################################################

HEADER_LOCALTRANS= #!/bin/bash
 ###############################################################################
 #                   %%TASKTYPE%% %%TEMPLATE_NAME%% EXPERIMENT
 ###############################################################################

