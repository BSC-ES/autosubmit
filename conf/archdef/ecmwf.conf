[archdef]
MODELS_DIR = /perm/ms/spesiccf/c3m/models
SCRATCH_DIR = /scratch/ms
SCRATCH_TMP_DIR = $SCRATCHDIR
HSM_DIR = ec:/c3m

GRIBAPIPATH = /usr/local/lib/metaps/lib/grib_api/1.9.16/bin64
GRIBAPIPATH_DEF = /usr/local/lib/metaps/lib/grib_api/1.9.16/share/definitions
GRIBAPIPATH_SAM = /usr/local/lib/metaps/lib/grib_api/1.9.16/ifs_samples/grib1

ENVCOM=
# modules setup
 set +xuve
 PATH=/usr/local/apps/netcdf/3.6.3/LP64/bin:${PATH}
 PATH=/usr/local/apps/nco/4.0.8/LP64/bin:${PATH}
 PATH=/usr/local/apps/cdo/1.5.8/LP64/bin:${PATH}
 PATH=/perm/ms/spesiccf/c3m/opt/cdftools-2.1/ibm-xlc/bin:${PATH}
 PATH=/perm/ms/spesiccf/c3m/opt/rebuild-r1312/bin:${PATH}
 PATH=/usr/local/lib/metaps/lib/grib_api/1.8.2/bin64:${PATH}
 set -xuve

ENVPARA=
# modules setup

RUNPARAIFS=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 rm -f model.conf
 for node in $(seq 1 $IFS_nproc); do
     echo "$IFS_exe -v ecmwf -e  $EXPVER" >> model.conf
 done
 /usr/bin/poe -pgmmodel mpmd -cmdfile model.conf
 set -e

RUNPARANEM=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 rm -f model.conf
 for node in $(seq 1 $NEMO_nproc); do
     echo "$NEMO_exe" >> model.conf
 done
 /usr/bin/poe -pgmmodel mpmd -cmdfile model.conf
 set -e

RUNPARAECE=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 rm -f model.conf
 for node in $(seq 1 $OASIS_nproc); do
     echo "$OASIS3_exe" >> model.conf
 done
 for node in $(seq 1 $IFS_nproc); do
     echo "$IFS_exe -v ecmwf -e  $EXPVER" >> model.conf
 done
 for node in $(seq 1 $NEMO_nproc); do
     echo "$NEMO_exe" >> model.conf
 done
 /usr/bin/poe -pgmmodel mpmd -cmdfile model.conf
 set -e

ENVCOM3=
# modules setup
 set +xuve
 PATH=/usr/local/apps/netcdf/3.6.3/LP64/bin:${PATH}
 PATH=/usr/local/apps/nco/4.0.8/LP64/bin:${PATH}
 PATH=/usr/local/apps/cdo/1.5.8/LP64/bin:${PATH}
 PATH=/perm/ms/spesiccf/c3m/opt/cdftools-2.1/ibm-xlc/bin:${PATH}
 PATH=/perm/ms/spesiccf/c3m/opt/rebuild_nemo-r3309/bin:${PATH}
 PATH=/usr/local/lib/metaps/lib/grib_api/1.9.16/bin64:${PATH}
 set -xuve

ENVPARA3=
# modules setup

RUNPARAIFS3=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 rm -f model.conf
 for node in $(seq 1 $ifs_numproc); do
     echo "$ifs_exe_file -v ecmwf -e  $exp_name" >> model.conf
 done
 /usr/bin/poe -pgmmodel mpmd -cmdfile model.conf
 set -e

RUNPARANEM3=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 rm -f model.conf
 for node in $(seq 1 $NEMO_nproc); do
     echo "$NEMO_exe" >> model.conf
 done
 /usr/bin/poe -pgmmodel mpmd -cmdfile model.conf
 set -e

RUNPARAECE3=
# set +e to avoid random errors at the end of each chunk
 set +e
 ulimit -s unlimited
 rm -f model.conf
 for node in $(seq 1 $oas_numproc); do
     echo "$oas_exe_file" >> model.conf
 done
 for node in $(seq 1 $ifs_numproc); do
     echo "$ifs_exe_file -v ecmwf -e  $exp_name" >> model.conf
 done
 for node in $(seq 1 $nem_numproc); do
     echo "$nem_exe_file" >> model.conf
 done
 /usr/bin/poe -pgmmodel mpmd -cmdfile model.conf
 set -e
