#on:
#  pull_request:
#  workflow_dispatch:
#  push:
#    branches:
#      - main
#      - master
#permissions:
#  contents: read
#
#jobs:
#  build-docker-images:
#    name: Build Docker images
#    env:
#      DOCKERHUB_SECRET: ${{ secrets.DOCKERHUB_TOKEN }}
#    # NOTE: Secrets are not available for external contributors, so we skip the job.
#    if: ${{ secrets.DOCKERHUB_TOKEN }}
#    runs-on: ubuntu-latest
#    timeout-minutes: 15
#
#    steps:
#      - name: Checkout
#        uses: actions/checkout@v5
#
#      - name: Login to Docker Hub
#        uses: docker/login-action@v3
#        with:
#          username: ${{ vars.DOCKERHUB_USERNAME }}
#          password: ${{ secrets.DOCKERHUB_TOKEN }}
#
#      - name: Set up QEMU
#        uses: docker/setup-qemu-action@v3
#
#      - name: Set up Docker Buildx
#        uses: docker/setup-buildx-action@v3
#
#      - name: Build and push
#        uses: docker/build-push-action@v6
#        with:
#          context: docker
#          # TODO: for a separate issue, try pushing it
#          push: false
#          load: true
#          tags: autosubmit/autosubmit:latest
#
#      - name: Test the image
#        run: |
#          docker run --rm autosubmit/autosubmit:latest autosubmit --version
#          # https://github.com/BSC-ES/autosubmit/issues/2359
#          docker run --rm autosubmit/autosubmit:latest /bin/bash -c '[ -n $USER ] || exit 1'
